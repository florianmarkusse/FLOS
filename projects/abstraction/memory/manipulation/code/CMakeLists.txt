create_abstraction_targets(abstraction-memory-manipulation)

if(${ENVIRONMENT} STREQUAL "FREESTANDING")
    add_project("freestanding")
    abstraction_add_sources(freestanding-memory-manipulation)
    abstraction_include_interface_library(freestanding-memory-manipulation)
elseif(${ENVIRONMENT} STREQUAL "EFI")
    add_project("freestanding")
    abstraction_add_sources(freestanding-memory-manipulation)
    abstraction_include_interface_library(freestanding-memory-manipulation)
elseif(${ENVIRONMENT} STREQUAL "POSIX")
    abstraction_include_interface_library(posix-memory-manipulation)
    # Posix should link with a stdlib that contains the right implementations
else()
    message(FATAL_ERROR "no memory manipulation implementation defined")
endif()
