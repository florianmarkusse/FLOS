create_abstraction_targets(abstraction-interrupts)

if(${ARCHITECTURE} STREQUAL "X86")
    if(${ENVIRONMENT} STREQUAL "FREESTANDING")
        add_project("x86")
        abstraction_add_sources(x86-idt)
        add_project("x86/kernel")
        abstraction_add_sources(x86-kernel-idt)
    elseif(${ENVIRONMENT} STREQUAL "EFI")
        add_project("efi")
        abstraction_add_sources(efi-interrupts)
    elseif(${ENVIRONMENT} STREQUAL "POSIX")
        # NOTE: This is not allowed realistically, but for now adding it so I can compile my tests
        add_project("x86")
        abstraction_add_sources(x86-idt)
        add_project("x86/kernel")
        abstraction_add_sources(x86-kernel-idt)
    else()
        message(FATAL_ERROR "Could not match ENVIRONMENT variable")
    endif()
else()
    message(FATAL_ERROR "Could not match ARCHITECTURE variable")
endif()
