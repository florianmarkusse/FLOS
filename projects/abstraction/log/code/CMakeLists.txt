create_abstraction_targets(abstraction-log)

add_subproject("shared")

if("${ENVIRONMENT}" STREQUAL "freestanding")
    add_subproject("freestanding")
    abstraction_add_sources(freestanding-log)
elseif("${ENVIRONMENT}" STREQUAL "efi")
    add_subproject("efi")
    abstraction_add_sources(efi-log)
elseif("${ENVIRONMENT}" STREQUAL "posix")
    add_subproject("posix")
    abstraction_add_sources(posix-log)
else()
    message(FATAL_ERROR "Could not match ENVIRONMENT variable")
endif()
